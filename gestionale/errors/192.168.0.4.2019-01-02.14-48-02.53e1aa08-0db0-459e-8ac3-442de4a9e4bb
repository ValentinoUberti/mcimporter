(dp1
S'output'
p2
S'<class \'gluon.contrib.pymysql.err.InternalError\'> (1054, u"Unknown column \'anagrafica_codici_iva.descrizione\' in \'field list\'")'
p3
sS'layer'
p4
S'C:\\workspace\\web2py\\applications\\gestionale\\models\\db.py'
p5
sS'code'
p6
S'# -*- coding: utf-8 -*-\n\n# -------------------------------------------------------------------------\n# This scaffolding model makes your app work on Google App Engine too\n# File is released under public domain and you can use without limitations\n# -------------------------------------------------------------------------\nfrom sets import Set\n\nif request.global_settings.web2py_version < "2.14.1":\n    raise HTTP(500, "Requires web2py 2.13.3 or newer")\n\n# -------------------------------------------------------------------------\n# if SSL/HTTPS is properly configured and you want all HTTP requests to\n# be redirected to HTTPS, uncomment the line below:\n# -------------------------------------------------------------------------\n# request.requires_https()\n\n# -------------------------------------------------------------------------\n# app configuration made easy. Look inside private/appconfig.ini\n# -------------------------------------------------------------------------\nfrom gluon.contrib.appconfig import AppConfig\n\n# -------------------------------------------------------------------------\n# once in production, remove reload=True to gain full speed\n# -------------------------------------------------------------------------\nmyconf = AppConfig()\n\nif not request.env.web2py_runtime_gae:\n    # ---------------------------------------------------------------------\n    # if NOT running on Google App Engine use SQLite or other DB\n    # ---------------------------------------------------------------------\n    db = DAL(myconf.get(\'db.uri\'),\n             pool_size=myconf.get(\'db.pool_size\'),\n             migrate_enabled=myconf.get(\'db.migrate\'),\n             check_reserved=[\'all\'],entity_quoting=False,fake_migrate=True)\nelse:\n    # ---------------------------------------------------------------------\n    # connect to Google BigTable (optional \'google:datastore://namespace\')\n    # ---------------------------------------------------------------------\n    db = DAL(\'google:datastore+ndb\')\n    # ---------------------------------------------------------------------\n    # store sessions and tickets there\n    # ---------------------------------------------------------------------\n    session.connect(request, response, db=db)\n    # ---------------------------------------------------------------------\n    # or store session in Memcache, Redis, etc.\n    # from gluon.contrib.memdb import MEMDB\n    # from google.appengine.api.memcache import Client\n    # session.connect(request, response, db = MEMDB(Client()))\n    # ---------------------------------------------------------------------\n\n# -------------------------------------------------------------------------\n# by default give a view/generic.extension to all actions from localhost\n# none otherwise. a pattern can be \'controller/function.extension\'\n# -------------------------------------------------------------------------\nresponse.generic_patterns = [\'*\'] if request.is_local else []\n# -------------------------------------------------------------------------\n# choose a style for forms\n# -------------------------------------------------------------------------\nresponse.formstyle = myconf.get(\'forms.formstyle\')  # or \'bootstrap3_stacked\' or \'bootstrap2\' or other\nresponse.form_label_separator = myconf.get(\'forms.separator\') or \'\'\n\n# -------------------------------------------------------------------------\n# (optional) optimize handling of static files\n# -------------------------------------------------------------------------\n# response.optimize_css = \'concat,minify,inline\'\n# response.optimize_js = \'concat,minify,inline\'\n\n# -------------------------------------------------------------------------\n# (optional) static assets folder versioning\n# -------------------------------------------------------------------------\n# response.static_version = \'0.0.0\'\n\n# -------------------------------------------------------------------------\n# Here is sample code if you need for\n# - email capabilities\n# - authentication (registration, login, logout, ... )\n# - authorization (role based authorization)\n# - services (xml, csv, json, xmlrpc, jsonrpc, amf, rss)\n# - old style crud actions\n# (more options discussed in gluon/tools.py)\n# -------------------------------------------------------------------------\n\nfrom gluon.tools import Auth, Service, PluginManager\n\n# host names must be a list of allowed host names (glob syntax allowed)\nauth = Auth(db, host_names=myconf.get(\'host.names\'))\nservice = Service()\nplugins = PluginManager()\n\n# -------------------------------------------------------------------------\n# create all tables needed by auth if not custom tables\n# -------------------------------------------------------------------------\nauth.define_tables(username=True, signature=False)\n\n# -------------------------------------------------------------------------\n# configure email\n# -------------------------------------------------------------------------\nmail = auth.settings.mailer\nmail.settings.server = \'logging\' if request.is_local else myconf.get(\'smtp.server\')\nmail.settings.sender = myconf.get(\'smtp.sender\')\nmail.settings.login = myconf.get(\'smtp.login\')\nmail.settings.tls = myconf.get(\'smtp.tls\') or False\nmail.settings.ssl = myconf.get(\'smtp.ssl\') or False\n\n# -------------------------------------------------------------------------\n# configure auth policy\n# -------------------------------------------------------------------------\nauth.settings.registration_requires_verification = False\nauth.settings.registration_requires_approval = False\nauth.settings.reset_password_requires_verification = True\n\n# -------------------------------------------------------------------------\n# Define your tables below (or better in another model file) for example\n#\n# >>> db.define_table(\'mytable\', Field(\'myfield\', \'string\'))\n#\n# Fields can be \'string\',\'text\',\'password\',\'integer\',\'double\',\'boolean\'\n#       \'date\',\'time\',\'datetime\',\'blob\',\'upload\', \'reference TABLENAME\'\n# There is an implicit \'id integer autoincrement\' field\n# Consult manual for more options, validators, etc.\n#\n# More API examples for controllers:\n#\n# >>> db.mytable.insert(myfield=\'value\')\n# >>> rows = db(db.mytable.myfield == \'value\').select(db.mytable.ALL)\n# >>> for row in rows: print row.id, row.myfield\n# -------------------------------------------------------------------------\n\n# -------------------------------------------------------------------------\n# after defining tables, uncomment below to enable auditing\n# -------------------------------------------------------------------------\n# auth.enable_record_versioning(db)\n\nenti_leonardo_set = Set()\nenti_leonardo_set.add("Nessuno")\n\nenti_leonardo_set.add("CAMPI BISENZIO - SAS - 103183022")\nenti_leonardo_set.add("CAMPI BISENZIO - ETN - 104715691")\nenti_leonardo_set.add("CAMPI BISENZIO - SSI - 103131261")\n\nenti_leonardo_set.add("LATINA - SAS - 105125426")\nenti_leonardo_set.add("LATINA - ETN - 106825095")\n\nenti_leonardo_set.add("NERVIANO - SAS - 102084090")\nenti_leonardo_set.add("NERVIANO - ETN - 105742618")\nenti_leonardo_set.add("NERVIANO - SSI - 101711562")\n\nenti_leonardo_set.add("CHIETI - SAS - 106824414")\nenti_leonardo_set.add("CHIETI - ETN - 106825079")\nenti_leonardo_set.add("CHIETI - SSI - 106827088")\n\nenti_leonardo_set.add("L\'AQUILA - SAS - 104427262")\n\n\ndb.define_table(\'enti_leonardo\',Field(\'ente\',requires = IS_IN_SET(enti_leonardo_set),default=\'Nessuno\'))\ndb(db.enti_leonardo).delete()\nfor e in enti_leonardo_set:\n    db.enti_leonardo.insert(ente=e)\n\n\n\ndb.define_table(\'porto\',Field(\'nome\'),migrate=\'porto.table\')\n    \ndb.define_table(\'vettore\',Field(\'nome\'),Field(\'domicilio\'),migrate=\'vettore.table\')\n\ntrasporto_a_mezzo = Set()\ntrasporto_a_mezzo.add("Mittente")\ntrasporto_a_mezzo.add("Destinatario")\ntrasporto_a_mezzo.add("Vettore")\n\nvettori_query = db(db.vettore).select()\nvettori_set = Set()\nfor item in vettori_query:\n    vettori_set.add(item.nome)\n    \n\ndb.define_table(\'codici_pagamenti\',Field(\'descrizione_codice_pagamento\',requires=[IS_NOT_IN_DB(db,\'codici_pagamenti.descrizione_codice_pagamento\')]),Field(\'giorni\',requires=IS_INT_IN_RANGE(0,300)),Field(\'giorni_mese_successivo\',requires=IS_INT_IN_RANGE(0,30)))\n\ncodici_pagamenti_query = db(db.codici_pagamenti).select()\ncodici_pagamenti_set = Set()\nfor item in codici_pagamenti_query:\n    codici_pagamenti_set.add(item.descrizione_codice_pagamento)\n\n\ndb.define_table(\'aspetto_esteriore_dei_beni\',Field(\'nome\'),migrate=\'aspetto_esteriore_dei_beni.table\')\ndb.define_table(\'causali\',Field(\'nome\'),migrate=\'causali.table\')\n\n    \n\ndb.define_table(\'anagrafica_magazzini_interni\',Field(\'nome_magazzino\',requires=[IS_NOT_IN_DB(db,\'anagrafica_magazzini_interni.nome_magazzino\')]))\n\ndb.define_table(\'causali_trasporti\',Field(\'causale\',requires=[IS_NOT_IN_DB(db,\'causali_trasporti.causale\')]))\n\n\ndb.define_table(\'codici_causali\',Field(\'descrizione_codice_causale\',requires=[IS_NOT_IN_DB(db,\'codici_causali.descrizione_codice_causale\')]))\n\ndb.define_table(\'anagrafica_codici_iva\',Field(\'codice_iva\',requires=[IS_NOT_IN_DB(db,\'anagrafica_codici_iva.codice_iva\')]),Field(\'descrizione_codice_iva\',requires=[IS_NOT_EMPTY()]),Field(\'percentuale_iva\',\'float\',requires=[IS_NOT_EMPTY()]),Field(\'bollo_su_importi_esenti\',\'boolean\'),Field(\'descrizione\'))\n\ncodici_iva_query = db(db.anagrafica_codici_iva.codice_iva).select()\ncodici_iva_set = Set()\nfor item in codici_iva_query:\n    codici_iva_set.add(item.descrizione_codice_iva)\n\n    \ncausali_trasporti = db(db.causali_trasporti).select()\ncausali_trasporti_set = Set()\nfor item in causali_trasporti:\n    causali_trasporti_set.add(item.causale)\n    \n\ndb.define_table(\'anagrafica_piano_dei_conti\',Field(\'codice_piano_dei_conti\',requires=[IS_NOT_IN_DB(db,\'anagrafica_piano_dei_conti.codice_piano_dei_conti\')]),Field(\'descrizione_codice\',requires=[IS_NOT_EMPTY()]))\n\nanagrafica_codici_piano_dei_conti_query = db(db.anagrafica_piano_dei_conti.codice_piano_dei_conti).select()\nanagrafica_codici_piano_dei_conti_set = Set()\nfor item in anagrafica_codici_piano_dei_conti_query:\n    anagrafica_codici_piano_dei_conti_set.add(item.codice_piano_dei_conti)\n\nanagrafica_codici_piano_dei_sottoconti_query = db(db.anagrafica_piano_dei_conti.codice_piano_dei_conti).select()\nanagrafica_codici_piano_dei_sottoconti_set = Set()\nfor item in anagrafica_codici_piano_dei_sottoconti_query:\n    if not item.codice_piano_dei_conti[-1:] == \'0\':\n        anagrafica_codici_piano_dei_sottoconti_set.add(item.codice_piano_dei_conti)\n\ndb.define_table(\'anagrafica_banche\',Field(\'descrizione\',requires=IS_NOT_EMPTY()),Field(\'indirizzo\',requires=IS_NOT_EMPTY()),Field(\'cap\',requires=IS_NOT_EMPTY()),Field(\'citta\',rname=\'citt\xc3\xa0\',requires=IS_NOT_EMPTY()),Field(\'provincia\',requires=IS_NOT_EMPTY()),Field(\'codice_sottoconto\',requires=IS_IN_SET(anagrafica_codici_piano_dei_sottoconti_set)),Field(\'descrizione_sottoconto\'),Field(\'codice_abi\'),Field(\'codice_cab\'),Field(\'iban\'))\n\ndb.define_table(\'anagrafica_banche_azienda\',Field(\'descrizione\',requires=IS_NOT_EMPTY()),Field(\'indirizzo\',requires=IS_NOT_EMPTY()),Field(\'cap\',requires=IS_NOT_EMPTY()),Field(\'citta\',rname=\'citt\xc3\xa0\',requires=IS_NOT_EMPTY()),Field(\'provincia\',requires=IS_NOT_EMPTY()),Field(\'codice_sottoconto\',requires=IS_IN_SET(anagrafica_codici_piano_dei_sottoconti_set)),Field(\'descrizione_sottoconto\'),Field(\'codice_abi\'),Field(\'codice_cab\'),Field(\'iban\'))\n\nanagrafica_banche_query = db(db.anagrafica_banche).select()\nanagrafica_banche_set = Set()\nfor item in anagrafica_banche_query:\n    anagrafica_banche_set.add(item.descrizione)\n\n\n\nsex = Set()\nsex.add("M")\nsex.add("F")\n\nfatturazione_set = Set()\nfatturazione_set.add("Riepilogativa")\nfatturazione_set.add("Singola")\n\ncash_flow_set = Set()\ncash_flow_set.add("Manuale")\ncash_flow_set.add("Automatico")\ncash_flow_set.add("Non gestito")\n\npartita_set = Set()\npartita_set.add("Gestite")\npartita_set.add("Non gestite")\n\n\ntrasporto_a_mezzo = Set()\ntrasporto_a_mezzo.add("Mittente")\ntrasporto_a_mezzo.add("Destinatario")\ntrasporto_a_mezzo.add("Vettore")\n\n\nct = db(db.causali).select()\ncausale_trasporto = Set()\nfor item in ct:\n    print item\n    causale_trasporto.add(item.nome)\n    \n    \n#Field(\'date_made\', \'datetime\', default=request.now, format=(\'%d/%m/%Y\'))\n\n\ndb.define_table(\'ddt_clienti\',Field(\'codice_ordine\',requires=[IS_NOT_IN_DB(db,\'ddt_clienti.codice_ordine\')]),Field(\'trasporto_a_mezzo\',requires=IS_IN_SET(trasporto_a_mezzo)),Field(\'causale_del_trasporto\',requires=IS_IN_SET(causale_trasporto)),Field(\'inizio_del_trasporto\', \'datetime\', requires=IS_EMPTY_OR(IS_DATE(format=(\'%d/%m/%Y\')))),Field(\'ditta_vettore\'),Field(\'domicilio_vettore\'),Field(\'data_e_ora_del_ritiro\', \'datetime\', requires=IS_EMPTY_OR(IS_DATE(format=(\'%d/%m/%Y\')))))\n\n\n\n\n\n\n\ncodici_pagamenti_query = db(db.codici_pagamenti.descrizione_codice_pagamento).select()\ncodici_pagamenti_set = Set()\nfor item in codici_pagamenti_query:\n    codici_pagamenti_set.add(item.descrizione_codice_pagamento)\n\ncodici_causali_query = db(db.codici_causali.descrizione_codice_causale).select()\ncodici_causali_set = Set()\nfor item in codici_causali_query:\n    codici_causali_set.add(item.descrizione_codice_causale)\n\nmy_porto= db(db.porto).select()\nmy_porto_set = Set()\nfor item in my_porto:\n    my_porto_set.add(item[\'nome\'])\n\n\ndb.define_table(\'clienti\',Field(\'nome\',requires=[IS_NOT_IN_DB(db,\'clienti.nome\')]),Field(\'citta\'),Field(\'indirizzo\'),Field(\'cap\'),Field(\'provincia\'),Field(\'nazione\'),Field(\'codice_fiscale\'),Field(\'partita_iva\',requires=IS_NOT_EMPTY()),Field(\'telefono\'),Field(\'fax\'),Field(\'cellulare\'),Field(\'email\',requires=[IS_EMAIL()]),Field(\'luogo_consegna_1\'),Field(\'luogo_consegna_2\'),Field(\'luogo_consegna_3\'),Field(\'luogo_consegna_4\'),Field(\'luogo_consegna_5\'),Field(\'luogo_consegna_6\'),Field(\'codice_sottoconto\',requires=IS_IN_SET(anagrafica_codici_piano_dei_conti_set)),Field(\'persona_fisica\',\'boolean\',default=\'False\'),Field(\'nato_a\'),Field(\'data_nascita\'),Field(\'provincia_nascita\'),Field(\'sesso\'),Field(\'codice_iva\',requires=IS_IN_SET(codici_iva_set)),Field(\'descrizione_esenzione_iva\'),Field(\'codice_banca\',requires=IS_IN_SET(anagrafica_banche_set)),Field(\'codice_iban\'),Field(\'fatturazione\',requires=IS_IN_SET(fatturazione_set)),Field(\'cash_flow\',requires=IS_IN_SET(cash_flow_set)),Field(\'partita\',requires=IS_IN_SET(partita_set)),Field(\'pagamento\',requires=IS_IN_SET(codici_pagamenti_set)),Field(\'annotazioni\',default=\'\'),Field(\'causale_trasporto\',requires=IS_IN_SET(causale_trasporto)),Field(\'trasporto_a_mezzo\',requires=IS_IN_SET(trasporto_a_mezzo)),Field(\'porto\',requires=IS_IN_SET(my_porto_set)),Field(\'vettore\',requires=IS_IN_SET(vettori_set)),Field(\'codiceDestinatario\'),Field(\'pec\'))\n\ndb.define_table(\'fornitori\',Field(\'nome\',requires=[IS_NOT_IN_DB(db,\'fornitori.nome\')]),Field(\'citta\'),Field(\'indirizzo\'),Field(\'cap\'),Field(\'provincia\'),Field(\'nazione\'),Field(\'codice_fiscale\'),Field(\'partita_iva\',requires=IS_NOT_EMPTY()),Field(\'telefono\'),Field(\'fax\'),Field(\'cellulare\'),Field(\'email\',requires=[IS_EMAIL()]),Field(\'luogo_consegna_1\'),Field(\'luogo_consegna_2\'),Field(\'codice_sottoconto\',requires=IS_IN_SET(anagrafica_codici_piano_dei_conti_set)),Field(\'persona_fisica\',\'boolean\',default=\'False\'),Field(\'nato_a\'),Field(\'data_nascita\'),Field(\'provincia_nascita\'),Field(\'sesso\'),Field(\'codice_iva\',requires=IS_IN_SET(codici_iva_set)),Field(\'descrizione_esenzione_iva\'),Field(\'codice_banca\',requires=IS_IN_SET(anagrafica_banche_set)),Field(\'codice_iban\'),Field(\'fatturazione\',requires=IS_IN_SET(fatturazione_set)),Field(\'cash_flow\',requires=IS_IN_SET(cash_flow_set)),Field(\'partita\',requires=IS_IN_SET(partita_set)),Field(\'pagamento\',requires=IS_IN_SET(codici_pagamenti_set)),Field(\'codiceDestinatario\'),Field(\'pec\'))\n\nmy_clients= db(db.clienti.nome).select()\nmy_clients_set = Set()\nfor item in my_clients:\n    my_clients_set.add(item[\'nome\'])\n    \nmy_fornitori= db(db.fornitori.nome).select()\nmy_fornitori_set = Set()\nfor item in my_fornitori:\n    my_fornitori_set.add(item[\'nome\'])\n\n\n\ndb.define_table(\'ddt_cliente\',Field(\'nome_cliente\',requires=IS_IN_SET(my_clients_set)),Field(\'trasporto_a_mezzo\',requires=IS_IN_SET(trasporto_a_mezzo)),Field(\'causale_del_trasporto\',requires=IS_IN_SET(causale_trasporto)),Field(\'inizio_del_trasporto\', \'datetime\', requires=IS_EMPTY_OR(IS_DATE(format=(\'%d/%m/%Y\')))),Field(\'ditta_vettore\'),Field(\'domicilio_vettore\'),Field(\'data_e_ora_del_ritiro\', \'datetime\', requires=IS_EMPTY_OR(IS_DATE(format=(\'%d/%m/%Y\')))),Field(\'id_cliente\'),Field(\'data_richiesta\',\'datetime\', default = request.now, requires = IS_DATE(format=(\'%d/%m/%Y\'))),Field(\'numero_ddt\'),Field(\'fattura_emessa\',\'boolean\',default=False,notnull=True),Field(\'porto\'),Field(\'peso\'),Field(\'aspetto\'),Field(\'annotazioni\'),Field(\'user_id\'),Field(\'consegna\',rname=\'consegna\'),migrate=\'ddt_cliente.table\')\n\ndb.define_table(\'ddt_fornitore\',Field(\'nome_fornitore\',requires=IS_IN_SET(my_fornitori_set)),Field(\'trasporto_a_mezzo\',requires=IS_IN_SET(trasporto_a_mezzo)),Field(\'causale_del_trasporto\',requires=IS_IN_SET(causale_trasporto)),Field(\'inizio_del_trasporto\', \'datetime\', requires=IS_EMPTY_OR(IS_DATE(format=(\'%d/%m/%Y\')))),Field(\'ditta_vettore\'),Field(\'domicilio_vettore\'),Field(\'data_e_ora_del_ritiro\', \'datetime\', requires=IS_EMPTY_OR(IS_DATE(format=(\'%d/%m/%Y\')))),Field(\'id_fornitore\'),Field(\'data_richiesta\',\'datetime\', default = request.now, requires = IS_DATE(format=(\'%d/%m/%Y\'))),Field(\'numero_ddt\'),Field(\'porto\'),Field(\'peso\'),Field(\'aspetto\'),Field(\'annotazioni\'),Field(\'user_id\'),migrate=\'ddt_fornitore.table\')\n\n\ndb.define_table(\'fattura_cliente\',Field(\'nome_cliente\',requires=IS_IN_SET(my_clients_set)),Field(\'dal\',\'datetime\',requires=IS_DATE(format="%d/%m/%Y")),Field(\'al\',\'datetime\',requires=IS_DATE(format="%d/%m/%Y")),Field(\'numero_fattura\'),Field(\'id_cliente\'),migrate=\'fattura_cliente.table\')\n\ntipologia_listini_set = Set()\ntipologia_listini_set.add("Cliente")\ntipologia_listini_set.add("Fornitore")\n\nlistini_set = my_clients_set.union(my_fornitori_set)\ndb.define_table(\'anagrafica_listini\',Field(\'nome_cliente\',requires=IS_IN_SET(listini_set)),Field(\'nome_listino\',requires=IS_NOT_EMPTY()),Field(\'tipologia_listino\',requires=IS_IN_SET(tipologia_listini_set)))\n\n"""\n#db.define_table(\'ordini_clienti\',Field(\'nome_cliente\',requires=IS_IN_SET(my_clients_set)),\n\ndb.define_table(\'articoli\',Field(\'anagrafica_articoli_id\'),Field(\'codice_articolo\',requires=IS_NOT_IN_DB(db,\'articoli.codice_articolo\')),Field(\'descrizione_articolo\',requires=IS_NOT_EMPTY()),Field(\'numero_pezzi_1\',requires=IS_NOT_EMPTY()),Field(\'prezzo_per_numero_pezzi_1\',requires=IS_NOT_EMPTY()),Field(\'data_inserimento_1\',\'datetime\'),Field(\'numero_pezzi_2\'),Field(\'prezzo_per_numero_pezzi_2\'),Field(\'data_inserimento_2\',\'datetime\'),Field(\'numero_pezzi_3\'),Field(\'prezzo_per_numero_pezzi_3\'),Field(\'data_inserimento_3\',\'datetime\'),Field(\'numero_pezzi_4\'),Field(\'prezzo_per_numero_pezzi_4\'),Field(\'data_inserimento_4\',\'datetime\'),Field(\'numero_pezzi_5\'),Field(\'prezzo_per_numero_pezzi_5\'),Field(\'data_inserimento_5\',\'datetime\'),Field(\'numero_pezzi_6\'),Field(\'prezzo_per_numero_pezzi_6\'),Field(\'data_inserimento_6\',\'datetime\'))\n\n"""\n\n"""\nMagazzini interni\n"""\n\nmy_magazzini_interni= db(db.anagrafica_magazzini_interni.nome_magazzino).select()\nmy_magazzini_interni_set = Set()\nfor item in my_magazzini_interni:\n    my_magazzini_interni_set.add(item[\'nome_magazzino\'])\n\n\n\nmy_listini= db(db.anagrafica_listini.nome_listino).select()\nmy_listini_set = Set()\nfor item in my_listini:\n    my_listini_set.add(item[\'nome_listino\'])\n\n\n\n\ndb.define_table(\'numero_ordine_cliente_progressivo\',Field(\'ultimo_codice_ordine\'))\ndb.define_table(\'numero_ordine_fornitore_progressivo\',Field(\'ultimo_codice_ordine\'),migrate=\'numero_ordine_fornitore_progressivo.table\')\n\n\n\ndb.define_table(\'ordine_cliente\',Field(\'ultimo_codice_ordine\'),Field(\'nome_cliente\',requires=IS_IN_SET(my_clients_set)),Field(\'data_inserimento\',\'datetime\',requires = IS_DATE(format=(\'%d/%m/%Y\'))),Field(\'listino\',requires=IS_IN_SET(my_listini_set)),Field(\'riferimento_ordine_cliente\'),Field(\'data_ordine_cliente\',\'datetime\',requires = IS_DATE(format=(\'%d/%m/%Y\'))),Field(\'magazzino_interno\',requires=IS_IN_SET(my_magazzini_interni_set)),Field(\'id_cliente\'),Field(\'ddt_completato\',\'boolean\',default = False),Field(\'pagamento\',requires=IS_IN_SET(codici_pagamenti_set)),Field(\'ente\',requires=IS_IN_SET(enti_leonardo_set),default=\'Nessuno\'))\n\n\n\n\n\n\n\ndb.define_table(\'ordine_fornitore\',Field(\'ultimo_codice_ordine\'),Field(\'nome_fornitore\',requires=IS_IN_SET(my_fornitori_set)),Field(\'data_inserimento\',\'datetime\',requires = IS_DATE(format=(\'%d/%m/%Y\'))),Field(\'listino\',requires=IS_IN_SET(my_listini_set)),Field(\'riferimento_ordine_cliente\'),Field(\'data_ordine_fornitore\',\'datetime\',requires = IS_DATE(format=(\'%d/%m/%Y\'))),Field(\'magazzino_interno\',requires=IS_IN_SET(my_magazzini_interni_set)),Field(\'id_fornitore\'),Field(\'ddt_completato\',\'boolean\',default = False),Field(\'pagamento\',requires=IS_IN_SET(codici_pagamenti_set)),Field(\'trasporto_a_mezzo\',requires=IS_IN_SET(trasporto_a_mezzo)),Field(\'porto\',requires=IS_IN_SET(my_porto_set)),Field(\'vettore\',requires=IS_IN_SET(vettori_set)),migrate=\'ordine_fornitore.table\')\n\ndb.define_table(\'righe_in_ordine_cliente\',Field(\'id_ordine_cliente\'),Field(\'n_riga\'),Field(\'codice_articolo\'),Field(\'quantita\'),Field(\'prezzo\'),Field(\'sconti\'),Field(\'codice_iva\',requires=IS_IN_SET(codici_iva_set)),Field(\'evasione\',\'datetime\',requires = IS_DATE(format=(\'%d/%m/%Y\'))),Field(\'riga_emessa_in_ddt\',\'boolean\',default = False),Field(\'commento\'))\n\n\ndb.define_table(\'righe_in_ordine_fornitore\',Field(\'id_ordine_fornitore\'),Field(\'n_riga\'),Field(\'codice_articolo\'),Field(\'quantita\'),Field(\'prezzo\'),Field(\'sconti\'),Field(\'codice_iva\',requires=IS_IN_SET(codici_iva_set)),Field(\'evasione\',\'datetime\',requires = IS_DATE(format=(\'%d/%m/%Y\'))),Field(\'riga_emessa_in_ddt\',\'boolean\',default = False),Field(\'commento\'),migrate=\'righe_in_ordine_fornitore.table\')\n\ndb.define_table(\'righe_in_ddt_cliente\',Field(\'id_ordine\'),Field(\'codice_ordine\'),Field(\'n_riga\'),Field(\'codice_articolo\'),Field(\'descrizione\'),Field(\'riferimento_ordine\'),Field(\'u_m\',default=\'Nr\'),Field(\'quantita_richiesta\'),Field(\'saldo\'),Field(\'quantita_prodotta\',default = 0),Field(\'prezzo\'),Field(\'sconti\'),Field(\'codice_iva\',requires=IS_IN_SET(codici_iva_set),default="Iva 22%"),Field(\'evasione\',\'datetime\',requires=IS_DATE(format=(\'%d/%m/%Y\'))),Field(\'user_id\'),Field(\'id_riga_ordine\'),migrate=\'righe_in_ddt_cliente.table\')\n\ndb.define_table(\'righe_in_ddt_fornitore\',Field(\'id_ordine\'),Field(\'codice_ordine\'),Field(\'n_riga\'),Field(\'codice_articolo\'),Field(\'descrizione\'),Field(\'riferimento_ordine\'),Field(\'u_m\',default=\'Nr\'),Field(\'quantita\'),Field(\'prezzo\'),Field(\'sconti\'),Field(\'codice_iva\',requires=IS_IN_SET(codici_iva_set),default="Iva 22%"),Field(\'evasione\',\'datetime\'),Field(\'user_id\'))\n\n\ndb.define_table(\'ddt_da_fatturare\',Field("numero_ddt"),Field(\'ddt_id\'),Field(\'data_emissione\'),Field(\'user_id\'),Field(\'totale\'),migrate=\'ddt_da_fatturare.table\')\n\ndb.define_table(\'saved_ddt\',Field(\'saved_ddt_id\'),Field(\'data_inserimento\'),Field(\'numero_ddt\'),Field(\'user_id\'),migrate=\'saved_ddt.table\')\n\ndb.define_table(\'saved_ddt_fornitori\',Field(\'saved_ddt_id\'),Field(\'data_inserimento\'),Field(\'numero_ddt\'),Field(\'user_id\'),migrate=\'saved_ddt_fornitori.table\')\n\ndb.define_table(\'saved_righe_in_ddt_cliente\',Field(\'saved_ddt_id\'),Field(\'id_ordine\'),Field(\'codice_ordine\'),Field(\'n_riga\'),Field(\'codice_articolo\'),Field(\'descrizione\'),Field(\'riferimento_ordine\'),Field(\'u_m\',default=\'Nr\'),Field(\'quantita\'),Field(\'prezzo\'),Field(\'sconti\'),Field(\'codice_iva\',requires=IS_IN_SET(codici_iva_set),default="Iva 22%"),Field(\'evasione\',\'datetime\'),Field(\'user_id\'),Field(\'id_riga_ordine\'))\ndb.define_table(\'saved_righe_in_ddt_cliente_undo\',Field(\'saved_ddt_id\'),Field(\'id_ordine\'),Field(\'codice_ordine\'),Field(\'n_riga\'),Field(\'codice_articolo\'),Field(\'descrizione\'),Field(\'riferimento_ordine\'),Field(\'u_m\',default=\'Nr\'),Field(\'quantita\'),Field(\'prezzo\'),Field(\'sconti\'),Field(\'codice_iva\',requires=IS_IN_SET(codici_iva_set),default="Iva 22%"),Field(\'evasione\',\'datetime\'),Field(\'user_id\'),Field(\'id_riga_ordine\'))\n\n\ndb.define_table(\'saved_righe_in_ddt_fornitore\',Field(\'saved_ddt_id\'),Field(\'id_ordine\'),Field(\'codice_ordine\'),Field(\'n_riga\'),Field(\'codice_articolo\'),Field(\'descrizione\'),Field(\'riferimento_ordine\'),Field(\'u_m\',default=\'Nr\'),Field(\'quantita\'),Field(\'prezzo\'),Field(\'sconti\'),Field(\'codice_iva\',requires=IS_IN_SET(codici_iva_set),default="Iva 22%"),Field(\'evasione\',\'datetime\'),Field(\'user_id\'))\n\n\ndb.define_table(\'righe_in_fattura_istantanea\',Field(\'codice_articolo\'),Field(\'descrizione\'),Field(\'riferimento_ordine\'),Field(\'u_m\',default=\'Nr\'),Field(\'qta\'),Field(\'prezzo\'),Field(\'sconti\'),Field(\'codice_iva\',requires=IS_IN_SET(codici_iva_set),default="Iva 22%"),Field(\'commento\'))\n\ndb.define_table(\'fattura\',Field(\'numero_fattura\'),migrate=\'fattura.table\')\ndb.define_table(\'ddt\',Field(\'numero_ddt\'))\n\ndb.define_table(\'bolli\',Field(\'descrizione\'),Field(\'valore\'),migrate=\'db.bolli.table\')\n\n\ndb.define_table(\'storico_articoli_prodotti\',Field(\'cliente\'),Field(\'codice_ordine\'),Field(\'n_riga\'),Field(\'codice_articolo\'),Field(\'descrizione\'),Field(\'riferimento_ordine\'),Field(\'ddt\'),Field(\'quantita\'),Field(\'prezzo\'),Field(\'codice_iva\',requires=IS_IN_SET(codici_iva_set),default="Iva 22%"),Field(\'evasione\',\'datetime\',requires = IS_DATE(format=(\'%d/%m/%Y\'))),migrate=\'storico_articoli_prodotti.table\')\n\nsezione_bilancio_set = Set()\nsezione_bilancio_set.add("Attivit\xc3\xa0")\nsezione_bilancio_set.add("Passivit\xc3\xa0")\nsezione_bilancio_set.add("Ordine")\nsezione_bilancio_set.add("Costi")\nsezione_bilancio_set.add("Ricavi")\n\n\ntipo_sottoconto_set = Set()\ntipo_sottoconto_set.add("Nessuno")\ntipo_sottoconto_set.add("Clienti")\ntipo_sottoconto_set.add("Fornitori")\ntipo_sottoconto_set.add("Iva")\ntipo_sottoconto_set.add("Magazzino")\ntipo_sottoconto_set.add("Banche")\ntipo_sottoconto_set.add("Riepilogo")\ntipo_sottoconto_set.add("Vendite corrispettivi")\ntipo_sottoconto_set.add("Ammortamenti")\ntipo_sottoconto_set.add("Generico")\n\ntipo_ordine_set = Set()\ntipo_ordine_set.add("Ordine acquisto")\ntipo_ordine_set.add("Call off")\ntipo_ordine_set.add("Annulato")\ntipo_ordine_set.add("Mai prodotto")\ntipo_ordine_set.add("Ordine di conto lavoro")\ntipo_ordine_set.add("Ordine prototipo")\ntipo_ordine_set.add("Fuori produzione")\ntipo_ordine_set.add("Da modificare")\ntipo_ordine_set.add("Difficolt\xc3\xa0 di produzione")\ntipo_ordine_set.add("Kanban")\n\ntipo_trattamento_set = Set()\ntipo_trattamento_set.add("Si")\ntipo_trattamento_set.add("No")\ntipo_trattamento_set.add("Vedi ordine cliente")\n\ntipo_articolo_set = Set()\ntipo_articolo_set.add("Prodotto finito")\ntipo_articolo_set.add("Semilavorato")\ntipo_articolo_set.add("Aggregato")\ntipo_articolo_set.add("Materia prima")\ntipo_articolo_set.add("Materiale ausiliario")\ntipo_articolo_set.add("Materiale di consumo")\n\n\ndb.define_table(\'anagrafica_articoli\',Field(\'codice_articolo\',requires=IS_NOT_IN_DB(db,\'anagrafica_articoli.codice_articolo\')),Field(\'giacenza\',requires=IS_INT_IN_RANGE(0,999999)),Field(\'descrizione\'),Field(\'revisione\'),Field(\'ubicazione\'),Field(\'cartella_disegno\'),Field(\'tipo_articolo\',requires = IS_IN_SET(tipo_articolo_set)),Field(\'segnala_prime_tre_produzioni\',\'boolean\'),Field(\'codice_iva\',requires = IS_IN_SET(codici_iva_set)),Field(\'trattamento\',requires = IS_IN_SET(tipo_trattamento_set)),Field(\'tipo_lamiera\'),Field(\'tipo_ordine\',requires=IS_IN_SET(tipo_ordine_set)),Field(\'codice_sottoconto\',requires=IS_IN_SET(anagrafica_codici_piano_dei_sottoconti_set)),Field(\'free_pass\',\'boolean\'),Field(\'codice_imballo\'),Field(\'descrizione_imballo\'))\n\n\n\n\ndb.define_table(\'piano_dei_conti\',Field(\'codice_gruppo\'),Field(\'descrizione_gruppo\'),Field(\'codice_conto\'),Field(\'descrizione_conto\'),Field(\'codice_sottoconto\'),Field(\'descrizione_sottoconto\'),Field(\'sezione_bilancio\',requires=IS_IN_SET(sezione_bilancio_set)),Field(\'tipo_sottoconto\',requires=IS_IN_SET(tipo_sottoconto_set)))\n\n\ndb.define_table(\'articolo_in_listino\',Field(\'nome_cliente\',requires=IS_IN_SET(my_clients_set)),Field(\'listino\',requires=IS_IN_SET(my_listini_set)),Field(\'id_articolo\'),Field(\'codice_articolo\'),Field(\'data_valuta\',\'datetime\'),Field(\'numero_pezzi\'),Field(\'prezzo\'),Field(\'note\'),Field(\'variazione\'))\n\ndb.define_table(\'articolo_in_listino_fornitori\',Field(\'nome_fornitore\',requires=IS_IN_SET(my_fornitori_set)),Field(\'listino\',requires=IS_IN_SET(my_listini_set)),Field(\'id_articolo\'),Field(\'codice_articolo\'),Field(\'data_valuta\',\'datetime\',requires=IS_DATE(format=\'%d/%m/%Y\')),Field(\'numero_pezzi\'),Field(\'prezzo\'),Field(\'note\'),Field(\'variazione\'),migrate=\'articolo_in_listino_fornitori.table\')\n\n\ndb.define_table(\'contabili_cc\',Field(\'cliente\',requires=[IS_IN_SET(my_clients_set)]),Field(\'indirizzo\'),Field(\'cap\'),Field(\'provincia\'),Field(\'nazione\'),Field(\'codice_fiscale\'),Field(\'partita_iva\'),Field(\'telefono\'),Field(\'fax\'),Field(\'cellulare\'),Field(\'email\',requires=[IS_EMAIL()]),Field(\'persona_fisica\',\'boolean\',default=\'False\'),Field(\'nato_a\'),Field(\'data_nascita\',\'datetime\',requires=[IS_DATE(format=(\'%d/%m/%Y\'))]),Field(\'provincia_nascita\'),Field(\'sesso\',requires=IS_IN_SET(sex)))\n\ndb.define_table(\'produzione_righe_per_ddt\',Field(\'id_riga_ordine\'),Field(\'quantita_prodotta\'),migrate=\'produzione_righe_per_ddt.table\')\n\ndb.define_table(\'fatture_salvate\',Field(\'data_fattura\',\'datetime\',requires=IS_DATE(format=\'%d/%m/%Y\')),Field(\'numero_fattura\'),Field(\'id_cliente\'),Field(\'id_ddt\'),Field(\'totale\'),Field(\'nome_cliente\'),Field(\'scadenza\',\'datetime\',requires=IS_DATE(format=\'%d/%m/%Y\')),Field(\'richiede_riba\',\'boolean\',default=\'F\'),Field(\'riba_emessa\',\'boolean\',default=\'F\'),Field(\'user_id\'),migrate="fatture_salvate.table")\ndb.define_table(\'riba_emesse\',Field(\'id_fattura\'),Field(\'id_cliente\'),Field(\'totale\'),Field(\'nome_cliente\'),Field(\'pagamento\'),Field(\'scadenza\',\'datetime\'))\n\ndb.define_table(\'fatture_scelte\',Field(\'id_fattura\'),Field(\'numero_fattura\'),Field(\'totale\'),Field(\'user_id\'),Field(\'cliente\'),Field(\'accorpa\',\'boolean\'),Field(\'id_cliente\'),Field(\'scadenza\',\'datetime\',requires=IS_DATE(format=\'%d/%m/%Y\')))\n\n\n\ndb.define_table(\'riserva_quantita\',Field(\'codice_articolo\'),Field(\'quantita\'),Field(\'id_riga_ordine\'),Field(\'user_id\'),Field(\'data_richiesta\',\'datetime\',requires=[IS_NOT_EMPTY(),IS_DATE(format=(\'%d-%m-%Y h:m\'))],default=lambda:datetime.datetime.now()))\ndb.define_table(\'scadenziario\',Field(\'data_consegna\',\'datetime\',requires=IS_DATE(format=\'%d/%m/%Y\')),Field(\'cliente\'),Field(\'riferimento_ordine\'),Field(\'codice_ordine\'),Field(\'codice_articolo\'),Field(\'descrizione\'),Field(\'qta_ordine\',requires=IS_INT_IN_RANGE(0,999999)),Field(\'qta_saldo\',requires=IS_INT_IN_RANGE(0,999999)),Field(\'prezzo\'),Field("id_riga"),migrate=\'scadenziario.table\')\n\ndb.define_table(\'totali_ddt_mese_\',Field(\'cliente\'),Field(\'totale\'))\ndb.define_table(\'totali_ddt_anno_\',Field(\'destinazione\'),Field(\'totale\'),migrate=\'totali_ddt_anno_.table\')\n\ndb.define_table(\'errori\',Field(\'tipo_errore\'))\ndb.define_table(\'temp_banca\',Field(\'banca\'))\ndb.define_table(\'numero_disposizioni_riba\',Field(\'numero\'))\n\ndb.define_table(\'articoli_in_produzione\',Field(\'data_consegna\',\'datetime\',requires=IS_DATE(format=\'%d/%m/%Y\')),Field(\'cliente\'),Field(\'riferimento_ordine\'),Field(\'codice_ordine\'),Field(\'codice_articolo\'),Field(\'descrizione\'),Field(\'qta_ordine\',requires=IS_INT_IN_RANGE(0,999999)),Field(\'qta_saldo\',requires=IS_INT_IN_RANGE(0,999999)),Field(\'prezzo\'),Field("id_riga"),migrate=\'articoli_in_produzione.table\')\ndb.define_table(\'lavorazioni\',Field(\'nome\'),Field(\'controllo\'))\n\n\n\n\n\ndb.define_table(\'lista_lavorazioni_per_articolo\',\n                Field(\'codice_articolo\'),\n                Field(\'json_dettaglio\',type=\'json\'),migrate=\'tablename.table\')\n\n\n\ndb.define_table(\'storico_articoli_prodotti_fornitore\',Field(\'fornitore\'),Field(\'codice_ordine\'),Field(\'n_riga\'),Field(\'codice_articolo\'),Field(\'descrizione\'),Field(\'riferimento_ordine\'),Field(\'ddt\'),Field(\'quantita\'),Field(\'prezzo\'),Field(\'codice_iva\',requires=IS_IN_SET(codici_iva_set),default="Iva 22%"),Field(\'evasione\',\'datetime\',requires = IS_DATE(format=(\'%d/%m/%Y\'))),migrate=\'storico_articoli_prodotti_fornitore.table\')\n\n\n\n'
p7
sS'snapshot'
p8
(dp9
sS'traceback'
p10
S'Traceback (most recent call last):\n  File "C:\\workspace\\web2py\\gluon\\restricted.py", line 227, in restricted\n    exec ccode in environment\n  File "C:\\workspace\\web2py\\applications\\gestionale\\models\\db.py", line 200, in <module>\n    codici_iva_query = db(db.anagrafica_codici_iva.codice_iva).select()\n  File "C:\\workspace\\web2py\\gluon\\packages\\dal\\pydal\\objects.py", line 2020, in select\n    return adapter.select(self.query, fields, attributes)\n  File "C:\\workspace\\web2py\\gluon\\packages\\dal\\pydal\\adapters\\base.py", line 1296, in select\n    return self._select_aux(sql,fields,attributes)\n  File "C:\\workspace\\web2py\\gluon\\packages\\dal\\pydal\\adapters\\base.py", line 1253, in _select_aux\n    self.execute(sql)\n  File "C:\\workspace\\web2py\\gluon\\packages\\dal\\pydal\\adapters\\base.py", line 1388, in execute\n    return self.log_execute(*a, **b)\n  File "C:\\workspace\\web2py\\gluon\\packages\\dal\\pydal\\adapters\\base.py", line 1382, in log_execute\n    ret = self.get_cursor().execute(command, *a[1:], **b)\n  File "C:\\workspace\\web2py\\gluon\\contrib\\pymysql\\cursors.py", line 117, in execute\n    self.errorhandler(self, exc, value)\n  File "C:\\workspace\\web2py\\gluon\\contrib\\pymysql\\connections.py", line 202, in defaulterrorhandler\n    raise errorclass, errorvalue\nInternalError: (1054, u"Unknown column \'anagrafica_codici_iva.descrizione\' in \'field list\'")\n'
p11
s.